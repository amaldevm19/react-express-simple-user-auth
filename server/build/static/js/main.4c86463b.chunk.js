(this["webpackJsonpsimple-user-auth"]=this["webpackJsonpsimple-user-auth"]||[]).push([[0],{25:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),c=n(19),a=n.n(c),i=(n(25),n(8)),u=n(2),o=n(0);function j(){return Object(o.jsx)("h1",{children:"Home Page"})}var l=n(5),b=n(9),p=n.n(b),O=n(11),h=n(13);function d(e){return x.apply(this,arguments)}function x(){return(x=Object(O.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("http://localhost:8000/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=function(e){var t=e.setToken,n=Object(u.f)(),s=Object(r.useState)(""),c=Object(l.a)(s,2),a=c[0],i=c[1],j=Object(r.useState)(""),b=Object(l.a)(j,2),x=b[0],f=b[1],v=Object(r.useState)(""),m=Object(l.a)(v,2),g=m[0],y=m[1],k=function(){var e=Object(O.a)(p.a.mark((function e(r){var s,c,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),h.validate(a)){e.next=4;break}return y("Please provide a valid email"),e.abrupt("return");case 4:return e.next=6,d({email:a,password:x});case 6:if(200!==(s=e.sent).status){e.next=15;break}return e.next=10,s.json();case 10:c=e.sent,t(c),n.push("/users"),e.next=19;break;case 15:return e.next=17,s.json();case 17:i=e.sent,y(i.message);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Login Form"}),Object(o.jsx)("p",{style:{display:g?"block":"none"},children:g}),Object(o.jsxs)("form",{style:{padding:10,display:"flex",flexDirection:"column",justifyContent:"space-around",minHeight:100},children:[Object(o.jsxs)("label",{children:["Email:",Object(o.jsx)("input",{type:"text",onChange:function(e){return i(e.target.value)},value:a})]}),Object(o.jsxs)("label",{children:["Password:",Object(o.jsx)("input",{type:"password",onChange:function(e){return f(e.target.value)},value:x})]}),Object(o.jsx)("input",{type:"submit",value:"submit",style:{maxWidth:"fit-content"},onClick:k})]})]})};function v(e){return m.apply(this,arguments)}function m(){return(m=Object(O.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("http://localhost:8000/api/users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(){var e=Object(u.f)(),t=Object(r.useState)(""),n=Object(l.a)(t,2),s=n[0],c=n[1],a=Object(r.useState)(""),i=Object(l.a)(a,2),j=i[0],b=i[1],d=Object(r.useState)(""),x=Object(l.a)(d,2),f=x[0],m=x[1],g=Object(r.useState)(""),y=Object(l.a)(g,2),k=y[0],S=y[1],w=Object(r.useState)(!1),C=Object(l.a)(w,2),T=C[0],P=C[1],N=Object(r.useState)(""),D=Object(l.a)(N,2),J=D[0],A=D[1],E=Object(r.useRef)(null),H=function(){var t=Object(O.a)(p.a.mark((function t(n){var r,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),h.validate(j)){t.next=4;break}return A("Please provide a valid email"),t.abrupt("return");case 4:if(k&&T){t.next=8;break}return A("Password is not matching"),E.current.focus(),t.abrupt("return");case 8:return A(""),t.next=11,v({username:s,email:j,password:f});case 11:if(201!=(r=t.sent).status){t.next=16;break}e.push("/users/login"),t.next=20;break;case 16:return t.next=18,r.json();case 18:c=t.sent,A(c.message);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Signup Form"}),Object(o.jsx)("p",{style:{display:J?"block":"none"},children:J}),Object(o.jsxs)("form",{style:{padding:10,display:"flex",flexDirection:"column",justifyContent:"space-around",minHeight:200},children:[Object(o.jsxs)("label",{children:["UserName:",Object(o.jsx)("input",{type:"text",onChange:function(e){return c(e.target.value)},value:s})]}),Object(o.jsxs)("label",{children:["Email:",Object(o.jsx)("input",{type:"email",onChange:function(e){return b(e.target.value)},value:j})]}),Object(o.jsxs)("label",{children:["Password:",Object(o.jsx)("input",{type:"password",onChange:function(e){return m(e.target.value)},value:f})]}),Object(o.jsxs)("label",{children:["Confirm Password:",Object(o.jsx)("input",{type:"password",style:T?{outlineColor:"green"}:{outlineColor:"tomato"},onChange:function(e){f===e.target.value?P(!0):P(!1),S(e.target.value)},value:k,ref:E})]}),Object(o.jsx)("input",{type:"submit",value:"submit",style:{maxWidth:"fit-content"},onClick:H})]})]})},y=function(e){var t=e.userToken;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Profile"}),Object(o.jsxs)("p",{children:["User Name : ",t.username]}),Object(o.jsxs)("p",{children:["Admin status : ",t.isAdmin?"Yes":"No"]})]})},k=function(e){var t=Object(u.g)().url;return Object(o.jsx)("div",{children:Object(o.jsx)(i.b,{to:"".concat(t,"/").concat(e.link),style:{textDecoration:"none",fontSize:"large"},children:e.name})})},S=function(e){var t=e.userToken,n=e.setToken,r=Object(u.f)();return t?Object(o.jsx)("a",{onClick:function(e){e.preventDefault(),n(null),r.push("/users")},style:{textDecoration:"none",fontSize:"large",cursor:"pointer"},href:"",children:" Logout"}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(k,{name:"Login",link:"login"}),Object(o.jsx)(k,{name:"Sign-up",link:"signup"})]})};n(33);function w(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(u.g)().path;Object(r.useEffect)((function(){var e=sessionStorage.getItem("userToken"),t=JSON.parse(e);return s(t),function(){s(null)}}),[]);var a=function(e){console.log(e),s(e),sessionStorage.setItem("userToken",JSON.stringify(e))};return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"user-links",children:Object(o.jsx)(S,{userToken:n,setToken:a})}),Object(o.jsxs)(u.c,{children:[Object(o.jsxs)(u.a,{exact:!0,path:"".concat(c,"/"),children:[n&&Object(o.jsx)(y,{userToken:n}),!n&&Object(o.jsx)(f,{setToken:a})]}),Object(o.jsx)(u.a,{path:"".concat(c,"/login"),children:!n&&Object(o.jsx)(f,{setToken:a})}),Object(o.jsx)(u.a,{path:"".concat(c,"/signup"),children:Object(o.jsx)(g,{})})]})]})}n(34);function C(){return Object(o.jsx)("nav",{children:Object(o.jsxs)("ul",{className:"navbar-style",children:[Object(o.jsx)("li",{children:Object(o.jsx)(i.b,{to:"/",children:"Home"})}),Object(o.jsx)("li",{children:Object(o.jsx)(i.b,{to:"/users",children:"Users"})})]})})}var T=function(){return Object(o.jsxs)("div",{style:{display:"flex",color:"white",backgroundColor:"blue"},children:[Object(o.jsx)("h1",{children:"Simple User Auth SPA"}),Object(o.jsx)(C,{})]})};n(35);var P=function(){return Object(o.jsx)("div",{className:"App",children:Object(o.jsx)(i.a,{children:Object(o.jsxs)("div",{children:[Object(o.jsx)(T,{}),Object(o.jsxs)(u.c,{children:[Object(o.jsx)(u.a,{path:"/users",children:Object(o.jsx)(w,{userToken:!1})}),Object(o.jsx)(u.a,{path:"/",children:Object(o.jsx)(j,{})})]})]})})})};a.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(P,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.4c86463b.chunk.js.map